<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mike's Karaoke</title>
    <link rel="stylesheet" type="text/css" href="public/main.css" /> 
    <script src="https://unpkg.com/papaparse@latest/papaparse.min.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
    <main id="admin">
        <div id="admin-container">
            <ol id="singer-container">
            </ol>

            <div id="list-manager-container">
                <button id="next-singer" onclick="nextSinger()">Next Singer</button>
                
                <form id="add-to-active-form">
                    <label for="select-singer">Select Singer</label>
                    <select name="select-singer" id="select-singer">
                        <option>Select One</option>
                    </select>
                    <button type="submit">Add to Active List</button>
                    <button type="button" id="delete-from-master" onclick="deleteFromMaster()">Delete From Master</button>
                </form>

                <form id="add-to-master-form">
                    <label for="add-to-master">Add New Singer</label>
                    <input name="add-to-master" id="add-to-master" type="text">
                    <button type="submit">Add Singer</button>
                </form>
                
                <form id="csv-form">
                    <div>
                        <label for="files">Upload CSV File:</label>
                        <input type="file" id="files" accept=".csv" required />
                    </div>

                        <button type="button" id="submit-file" onclick="uploadFile()">Upload File</button>

                </form>

                <button id="clear-active-list" type="submit" onclick="clearActiveList()">Clear Active List</button>
                
            </div>
            <!-- add singer to master list -->
            <!-- add singer from master to display -->
                <!-- refresh display -->
        </div>
        
    </main>
    <footer class="admin">
        <a href="index.html" target="_blank">Open Display</a>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            // TestFun();
            getLists();
            showSingers(true);
            displayMasterOptions();
            
            // Attach form submit handler so Enter key triggers addSingerToMaster()
            const addToMasterForm = document.getElementById('add-to-master-form');
            if(addToMasterForm){
                addToMasterForm.addEventListener('submit', function(e){
                    e.preventDefault();
                    addSingerToMaster();
                });
            }        
            
            // Attach form submit handler so Enter key triggers addSingerToActive()
            const AddToActiveForm = document.getElementById('add-to-active-form');
            if(AddToActiveForm){
                AddToActiveForm.addEventListener('submit', function(e){
                    e.preventDefault();
                    addSingerToActive();
                });
            }      
        });
        </script>
</body>
</html>